KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
0,$90,$9E,$00,$C6,$C6,$C6,$FE,$C6,$C6,$C6,$C6,$00,$FF,$FF,$18,$18,$FF,$FF,$00
			!by	$00,$00,$60,$F0,$F9,$FF,$FF,$FF,$FF,$00,$00,$00,$00,$00,$00,$00,$FF,$81,$81,$81,$81,$81,$81,$FF,$FF,$C3,$C3,$C3,$C3,$C3,$C3,$FF
			!by	$E7,$FF,$C3,$99,$81,$99,$FF,$FF,0,$9C,$FF,$FF
			!by	$FF,$99,$C3,$E7,$C3,$99,$FF,$FF,$FF,$99,$99,$C3,$E7,$E7,$FF,$FF,$FF,$81,$F9,$E7,$9F,$81,$FF,$FF,$99,$FF,$C3,$99,$81,$99,$FF,$FF
			!by	$F8,$FC,$82,$33,$33,$33,$87,$FF,$99,$FF,$C3,$99,$99,$C3,$FF,$FF,$FF,$E7,$C3,$81,$E7,$E7,$E7,$E7,7,$98,$99,$C0,$FF,$F9,$F3,$E7,$FF,$FF,$FF,$FF,$FF
			!by	$F3,$E7,$CF,$CF,$CF,$E7,$F3,$FF,$CF,$E7,$F3,$F3,$F3,$E7,$CF,$FF,$FF,$93,$C7,$01,$C7,$93,$FF,$FF,$FF,$E7,$E7,$81,$E7,$E7,$FF,$FF
			!by	$FF,$FF,$FF,$FF,$FF,$E7,$E7,$CF,$FF,$FF,$FF,$81,$FF,$FF,$FF,F,$83,$F1,$83,$FF,$FF,$FF,$C1,$9F,$83,$99,$C3,$FF,$FF,$FF,$81,$F9,$F3,$E7,$CF,$FF,$FF
			!by	$FF,$C3,$99,$C3,$99,$C3,$FF,$FF,$FF,$C3,$99,$C1,$F9,$83,$FF,$FF,$FF,$FF,$E7,$FF,$FF,$E7,$FF,$FF,$FF,$FF,$E7,$FF,$FF,$E7,$E7,$CF
			!by	$F1,$E7,$CF,$9F,$CF,$E7,F,$00,$00,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$FF,$CF,$CF,$CF,$CF,$CF,$CF,$CF,$CF
			!by	$F3,$F3,$F3,$F3,$F3,$F3,$F3,$F3,$FF,$FF,$FF,$1F,$0F,$C7,$E7,$E7,$E7,$E7,$E3,$F0,$F8,$FF,$FF,$FF,$E7,$E7,$C7,$0F,$1F,$FF,$FF,0,$80,$C1,$E3,$F7,$FF
			!by	$9F,$9F,$9F,$9F,$9F,$9F,$9F,$9F,$FF,$FF,$FF,$F8,$F0,$E3,$E7,$E7,$3C,$18,$81,$C3,$C3,$81,$18,$3C,$FF,$C3,$81,$99,$99,$81,$C3,$FF
			!by	$E7,$E7,$99,$99,$E7,$E7,$C3,$FF,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F7,$E3,$C1,$80,$C1,$E3,0,$00,$C0,$F0,$F8,$F8,$FC,$0F,$0F,$0C,$08,$08,$0C,$07,$07
			!by	$FF,$FF,$7C,$38,$6C,$EE,$C7,$D7,$FC,$FC,$3C,$1C,$18,$38,$F8,$F0,$00,$03,$03,$01,$01,$00,$00,$00,$FF,$7F,$AA,$55,$FF,$7F,$00,$00
			!by	$00,$30,$B0,$30,$E0,$00,$00,$00,$00,$10,$10,$10,$FE,0,$00,$00,$00,$5A,$BD,$BD,$99,$00,$00,$00,$5A,$BD,$BD,$99,$42,$00,$00,$5A,$BD,$BD,$99,$42,$24
			!by	$00,$5A,$BD,$BD,$99,$42,$24,$24,$5A,$BD,$BD,$99,$42,$24,$24,$18,$00,$5A,$BD,$BD,$99,$42,$24,$18,$00,$00,$5A,$BD,$BD,$BD,$24,$18
			!by	$00,$00,$00,$5A,KK$FF,$C3,$99,$81,$99,$99,$FF,$FF,$FF,$83,$99,$83,$99,$83,$FF,$FF,$FF,$C1,$9F,$9F,$9F,$C1,$FF,$FF
			!by	$FF,$83,$99,$99,$99,$83,$FF,$FF,$FF,$81,$9F,$87,$9F,$81,$FF,$FF,$FF,$81,$9F,$87,$9F,$9F,$FF,$FF,$FF,$C1,$9F,$99,$99,$C1,$FF,$FF
			!by	$FF,$99,$99,$8!by	$FF,$83,$99,$83,$9F,$9F,$FF,$FF,$FF,$C3,$99,$99,$91,$C3,$F9,$FF,$FF,$83,$99,$83,$99,$99,$FF,$FF,$FF,$C1,$9F,$C3,$F9,$83,$FF,$FF
			!by	$FF,$81,$E7,$E7,$E7,$E7,$FF,$FF,$FF,$99,$99,$99,$99,$C3,$FF,$FF,$FF,$99,$99,$99,$C3,$E7,$FF,$FF,$FF,$9C,$9C,$94,$8$FF,$EF,$CF,$80,$80,$CF,$EF,$FF
			!by	$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$E7,$E7,$E7,$E7,$FF,$FF,$E7,$FF,$99,$99,$99,$FF,$FF,$FF,$FF,$FF,$99,$99,$00,$99,$00,$99,$99,$FF
			!by	$E7,$C1,$9F,$C3,$F9,$83,$E7,$FF,$9D,$99,$F3,$E7,$CF,$99,$B9,$FF,$C3,$99,$C3,$C$FF,$FF,$FF,$FF,$FF,$FF,$E7,$E7,$FF,$FF,$FC,$F9,$F3,$E7,$CF,$9F,$FF
			!by	$FF,$C3,$91,$99,$89,$C3,$FF,$FF,$FF,$E7,$87,$E7,$E7,$81,$FF,$FF,$FF,$C3,$99,$E3,$8F,$81,$FF,$FF,$FF,$C3,$99,$F3,$99,$C3,$FF,$FF
			!by	$FF,$99,$99,$81,$F9,$F9,$FF,$FF,$FF,$81,$9$F1,$FF,$FF,$FF,$81,$FF,$81,$FF,$FF,$FF,$8F,$E7,$F3,$F9,$F3,$E7,$8F,$FF,$C3,$99,$F9,$F3,$E7,$FF,$E7,$FF
			!by	$FF,$FF,$FF,$00,$00,$FF,$FF,$FF,$F7,$E3,$C1,$80,$80,$E3,$C1,$FF,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$FF,$FF,$FF,$00,$00,$FF,$FF,$FF
			!by	$FF,$F$FF
			!by	$3F,$3F,$3F,$3F,$3F,$3F,$00,$00,$7F,$3F,$9F,$CF,$E7,$F3,$F9,$FC,$FE,$FC,$F9,$F3,$E7,$CF,$9F,$3F,$00,$00,$3F,$3F,$3F,$3F,$3F,$3F
			!by	$00,$00,$FC,$FC,$FC,$FC,$FC,$FC,$FF,$C3,$81,$81,$81,$81,$C3,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$C9,$80,$8$F7,$FF,$E7,$E7,$E7,$00,$00,$E7,$E7,$E7
			!by	$3F,$3F,$CF,$CF,$3F,$3F,$CF,$CF,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$FF,$FF,$FC,$C1,$89,$C9,$C9,$FF,$00,$80,$C0,$E0,$F0,$F8,$FC,$FE
			!by	$00,$00,$00,$00,$03,$07,$07,$0F,$00,$00,$1E,$FF,$FF,$FF,$FF,$FF,$00,$0$10,$10,$10,$00,$08,$08,$D0,$38,$16,$20,$20,$00,$04,$88,$68,$10,$2C,$22,$40
			!by	$00,$04,$C4,$28,$10,$28,$46,$40,$00,$82,$44,$28,$10,$28,$44,$82,$00,$40,$46,$28,$10,$28,$C4,$04,$00,$40,$22,$2C,$10,$68,$88,$04
			!by	$00,$20,$20,$16,$38,$D0,$08,$08,$0 $BD,$BD,$BD,$18
K1,$99,$99,$FF,$FF,$FF,$C3,$E7,$E7,$E7,$C3,$FF,$FF,$FF,$F9,$F9,$F9,$99,$C3,$FF,$FF,$FF,$99,$93,$87,$93,$99,$FF,$FF
			!by	$FF,$9F,$9F,$9F,$9F,$81,$FF,$FF,$FF,$9C,$80,$94,$9C,$9C,$FF,$FF,$FF,$9C,$84,$90,$98,$9C,$FF,$FF,$FF,$C3,$99,$99,$99,$C3,$FF,$FF
			
0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$20,$20,$02,$19,$20,$20,$0A,$0F,$08,$0E,$20,$03,$01,$12,$0D,$0F,$0E,$19,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20


	;
	;	CUSTOM CHARACTER SET
	;
	
charset		!by	$18,$00,$3C,$66,$7E,$66,$00,$00,$00,$3C,$66,$7E,$66,$66,$00,$00,$0$18,$3C,$00,$00,$00,$06,$06,$06,$66,$3C,$00,$00,$00,$66,$6C,$78,$6C,$66,$00,$00
			!by	$00,$60,$60,$60,$60,$7E,$00,$00,$00,$63,$7F,$6B,$63,$63,$00,$00,$00,$63,$7B,$6F,$67,$63,$00,$00,$00,$3C,$66,$66,$66,$3C,$00,$00
			!by	$00,$7C,$66,$7C,$60,$60,$00,$0$18,$3C,$66,$00,$00,$00,$66,$66,$3C,$18,$18,$00,$00,$00,$7E,$06,$18,$60,$7E,$00,$00,$66,$00,$3C,$66,$7E,$66,$00,$00
			!by	$07,$03,$7D,$CC,$CC,$CC,$78,$00,$66,$00,$3C,$66,$66,$3C,$00,$00,$00,$00,$00,$00,$5A,$BD,$BD,$99,$00,$10,$10,$10,$FE,$10,$10,$10
	$00,$00,$00,$00
			!by	$0C,$18,$30,$30,$30,$18,$0C,$00,$30,$18,$0C,$0C,$0C,$18,$30,$00,$00,$6C,$38,$FE,$38,$6C,$00,$00,$00,$18,$18,$7E,$18,$18,$00,$00
			!by	$00,$00,$00,$00,$00,$18,$18,$30,$00,$00,$00,$7E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$0$7C,$66,$3C,$00,$00,$00,$7E,$06,$0C,$18,$30,$00,$00
			!by	$00,$3C,$66,$3C,$66,$3C,$00,$00,$00,$3C,$66,$3E,$06,$7C,$00,$00,$00,$00,$18,$00,$00,$18,$00,$00,$00,$00,$18,$00,$00,$18,$18,$30
			!by	$0E,$18,$30,$60,$30,$18,$0E,$00,$00,$00,$7E,$00,$7E,$00,$0$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$00,$00,$30,$30,$30,$30,$30,$30,$30,$30
			!by	$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$00,$00,$E0,$F0,$38,$18,$18,$18,$18,$1C,$0F,$07,$00,$00,$00,$18,$18,$38,$F0,$E0,$00,$00,$00
			!by	$C0,$C0,$C0,$C0,$C0,$C$60,$60,$60,$60,$60,$60,$60,$00,$00,$00,$07,$0F,$1C,$18,$18,$C3,$E7,$7E,$3C,$3C,$7E,$E7,$C3,$00,$3C,$7E,$66,$66,$7E,$3C,$00
			!by	$18,$18,$66,$66,$18,$18,$3C,$00,$06,$06,$06,$06,$06,$06,$06,$06,$08,$1C,$3E,$7F,$3E,$1C,$08,$00,$18,$18,$18,$FF,$FF,$18,$1$0C,$08,$08,$0C,$07,$07
			!by	$FF,$FF,$7C,$38,$6C,$EE,$C7,$D7,$FC,$FC,$3C,$1C,$18,$38,$F8,$F0,$00,$03,$03,$01,$01,$00,$00,$00,$FF,$7F,$AA,$55,$FF,$7F,$00,$00
			!by	$00,$30,$B0,$30,$E0,$00,$00,$00,$00,$10,$10,$10,$FE,$10,$10,$10,$18,$0C,$00,$00,$FF,$C $7E,$FF,$7E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$3C,$66
			!by	$00,$30,$78,$78,$30,$00,$00,$00,$00,$38,$7C,$7C,$7C,$38,$00,$00,$00,$18,$3C,$7E,$7E,$3C,$18,$00,$81,$C3,$E7,$FF,$FF,$E7,$C3,$81
			!by	$9E,$90,$90,$FE,$12,$12,$F2,$00,$F2,$12,$12,$FE,$9$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$0E,$0F,$14,$05,$20,$14,$08,$09,$13,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$15,$13,$05,$12,$10,$0F,$12,$14,$20,$10,$0F,$17,$05,$12,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$2$05,$20,$0F,$10,$10,$0F,$13,$09,$14,$05,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$7C,$66,$7C,$66,$7C,$00,$00,$00,$3E,$60,$60,$60,$3E,$00,$00
			!by	$00,$7C,$66,$66,$66,$7C,$00,$00,$00,$7E,$60,$78,$60,$7E,$00,$00,$00,$7E,$60,$78,$60,$60,$00,$00,$00,$3E,$60,$66,$66,$3E,$00,$00
			!by	$00,$66,$66,$7E,$66,$66,$00,$00,$00,$3C,$18,$18,0,$00,$3C,$66,$66,$6E,$3C,$06,$00,$00,$7C,$66,$7C,$66,$66,$00,$00,$00,$3E,$60,$3C,$06,$7C,$00,$00
			!by	$00,$7E,$18,$18,$18,$18,$00,$00,$00,$66,$66,$66,$66,$3C,$00,$00,$00,$66,$66,$66,$3C,$18,$00,$00,$00,$63,$63,$6B,$7F,$63,$00,$00
			!by	$00,$66,$3C,		!by	$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$18,$18,$00,$00,$18,$00,$66,$66,$66,$00,$00,$00,$00,$00,$66,$66,$FF,$66,$FF,$66,$66,$00
			!by	$18,$3E,$60,$3C,$06,$7C,$18,$00,$62,$66,$0C,$18,$30,$66,$46,$00,$3C,$66,$3C,$38,$67,$66,$3F,$00,$06,$0C,$18,$00,0,$00,$03,$06,$0C,$18,$30,$60,$00
			!by	$00,$3C,$6E,$66,$76,$3C,$00,$00,$00,$18,$78,$18,$18,$7E,$00,$00,$00,$3C,$66,$1C,$70,$7E,$00,$00,$00,$3C,$66,$0C,$66,$3C,$00,$00
			!by	$00,$66,$66,$7E,$06,$06,$00,$00,$00,$7E,$60,$7C,$0E,$7C,$00,$00,$00,$3E,$60,0,$00,$70,$18,$0C,$06,$0C,$18,$70,$00,$3C,$66,$06,$0C,$18,$00,$18,$00
			!by	$00,$00,$00,$FF,$FF,$00,$00,$00,$08,$1C,$3E,$7F,$7F,$1C,$3E,$00,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$00,$FF,$FF,$00,$00,$00
			!by	$00,$00,$FF,$FF,$00,$00,$00,$00,$00,$FF,0,$FF,$FF,$80,$C0,$60,$30,$18,$0C,$06,$03,$01,$03,$06,$0C,$18,$30,$60,$C0,$FF,$FF,$C0,$C0,$C0,$C0,$C0,$C0
			!by	$FF,$FF,$03,$03,$03,$03,$03,$03,$00,$3C,$7E,$7E,$7E,$7E,$3C,$00,$00,$00,$00,$00,$00,$FF,$FF,$00,$36,$7F,$7F,$7F,$3E,$1C,$08,$00
			!by	$60,8,$18
			!by	$C0,$C0,$30,$30,$C0,$C0,$30,$30,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$03,$3E,$76,$36,$36,$00,$FF,$7F,$3F,$1F,$0F,$07,$03,$01
			!by	$00,$00,$00,$00,$03,$07,$07,$0F,$00,$00,$1E,$FF,$FF,$FF,$FF,$FF,$00,$00,$00,$C0,$F0,$F8,$F8,$FC,$0F,$0F,	0,$60,$30,$FF,$FF,$00,$00,$18,$3C,$7E,$FF
			!by	$04,$0A,$12,$21,$41,$01,$00,$00,$00,$00,$9F,$00,$E7,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0C,$33,$C0,$00,$00,$00
			!by	$01,$03,$06,$0C,$18,$30,$60,$C0,$C0,$60,$30,$18,$0C,$06,$03,$01,$00,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$09,$0E,$14,$05,$12,$06,$01,$03,$05,$20,$17,$09,$0C,$0C,$20,$20,$0C,$09,$0B,$05,$0C,$19,$20,$02,
	ldy #21				; set loc to port 7
			
			jsr rvsont			; set rvs indicator to 'on'	
		
			
		;	
		;	SCAN PORTS FOR 'OFF' STATUS
		;

+			lda #pb0			; port 0	; check to see if it's alread off
			bit portloc 
			bne +				; it is, jump ahead
			
				bit portloc
			bne +				; it is, jump ahead
			
			ldy #12				; set loc to port 4
			
			jsr rvsofft			; set rvs off indicator
			
+			lda #pb5			; load port 5	; check to see if it's already off
			bit portloc
			bne +				; set loc port 5	
				jsr rvsofft			; set rvs off indicator
			
+			lda #pb7			; port 7	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #21				; set loc to port 7
			
			jsr rvsofft			; set rvs indicator to 'off'
		
+	 OFF RVS for selected character
			sta (zp1),y			; store it
	
			rts	
			
			
flag		!by 0	
sizel		!by 0
sizeh		!by 0
portsw		!by 0
xstore		!by 0	
ystore		!by 0
charbackup	!by 0
isrbackup	!by 0,0			


	;	
	;	SCREEN DATA
	;
			
screentx$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!b$34,$5D,$5D,$35,$5D,$5D,$36,$5D,$5D,$37,$5D,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$2$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$2$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$0B,$05,$19,$13,$20,$30,$2D,$37,$20,$03,$0F,$0E,$14,$12,$0F,$0C,$20,$10,$0F,$12,$14,$13,$20,$30,$2D,$37,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$2$14,$0F,$20,$11,$15,$09,$14,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$2 $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$30,$31,$32,$33,$34,$35,$36,$37,$20,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$10,$0F,$12,$14,$20,$0F,$06,$06,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$2		ldy #0
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb1			; load port 1	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #3				; set loc to port 1
			
			jsr rvsofft			; set rvs inoad port 3	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #9				; set loc to port 3
			
			jsr rvsofft			; set rvs indicator to 'off'

+			lda #pb4			; load port 4	; check to see if it's already off
		
			ldy #15				; set loc to port 5
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb6			; load port 6	; check to see if it's already off
			bit portloc
			bne +				; it is, jump head
			
			ldy #18				; set loc to port 6
			
		jmp returnint


rvsont		lda #rvson			; load the RVS ON character
			ora (zp1),y			; turn ON RVS for selected character
			sta (zp1),y			; store it
			
			rts
			
			
rvsofft		lda #rvsoff			; load the RVS OFF character
			and (zp1),y			; turnt	!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$10,$0F,$12,$14,$20,$20,$13,$14,$01,$14,$15,$13,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,y	$20,$20,$20,$20,$20,$20,$20,$20,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$5D,$30,$5D,$5D,$31,$5D,$5D,$32,$5D,$5D,$33,$5D,$5D,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$27,$2D,$27,$20,$0B,$05,$19,$20,$01,$0C,$0C,$20,$0F,$06,$06,$20,$27,$2b,$27,$20,$0B,$05,$19,$20,$01,$0C,$0C,$20,$0F,$0E,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$10,$12,$05,$13,$13,$20,$27,$05,$0E,$14,$05,$12,$27,$20,$20,	0,$20,$20,$B0,$B1,$B2,$B3,$B4,$B5,$B6,$B7,$20,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$10,$0F,$12,$14,$20,$20,$0F,$0E,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,dicator to 'off'
			
+			lda #pb2			; load port 2	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #6				; set loc to port 2			
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb3			; l
<<  ????          |8l<8    U   00     8   h,"@ ((F@ D((D @F(( @",h   8    Z   ZB  ZB$ ZB$$Zload all ports off (0)
			sta portloc			; store it in port	; update port status
			
			ldx xstore			; restore x
			ldy ystore			; restore y
			clc					
			jsr plot			; cursor position
						
			jsr clearscreen		; clear the screen before exit
								; start interupt operations

			rts	
				
loop		jsr getin			; get a character from keyboard
			
			beq loop
			cmp #$0d			; <return> key pressed
			beq exit			
			cmp #"0"			; "0" key pressed
			beq zero
			cmp #"1"			; "1" key pressed
				; "7" key pressed
			beq seven
			cmp #"+"			; "*" key pressed
			beq allon
			cmp #"-"			; "-" key pressed
			beq alloff
			
			bne loop			; everything else, back to loop

		
	;	
	;	MENU COMMANDS (removed JSR's for speed)
	;

zero		lda 
			jmp switchport
			
four		lda #pb4			; switch the port on/off			
			jmp switchport
			
five		lda #pb5			; switch the port on/off			
			jmp switchport
			
six			lda #pb6			; switch the port on/off			
			jmp switchport

seven		lda #pb7			; swump back to loop
			
alloff		lda #pboff			; load all off
			sta portloc			; store it in port loc ; update port status
			
			lda #on				; set flag to indicate a change
			sta flag			; store it
			
			jmp loop			; jump back to loop
		
switchporting changed
			cmp #off		
			bne +				; somehthing changed continue on
	
			jmp returnint		; no flag set go back
			
+			lda #off			; reset flag back to OFF
			sta flag			; store it	
			
			lda #pb0 			; load port 0	; check to see if it's alread jump ahead
			
			ldy #3				; set loc to port 1	
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb2			; load port 2	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #6				; set loc to poor to 'on'

+			lda #pb4			; load port 4	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #12				; set loc to port 4
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb5			; load port 5	; c c
			beq +				; it is, jump ahead
			
			ldy #18				; set loc to port 6
						
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb7			; load port 7	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
		 B$$ ZB$  Z$   Z
			sta portloc
			
			lda #<pbloc			; port locations on screen	(LO byte)
			ldy #>pbloc			; add "3" for each port		(HI byte)			
			sta zp1
			sty zp1+1
			
			cli					; restore interupt operation
			
			rts
	
	
	 not finished
md2      	ldx sizel
			beq md4
md3      	lda (zp1),y			; move the remaining bytes
			sta (zp2),y
			iny
			dex
			bne md3
md4      	rts
			

		;	
		;	MAIN LOOP (ISR takes care of most functions)
		;
				
exit		lda #pboff			; 
			sei					; stop interupt operations
			
			lda isrbackup		; load back previous	(LO byte)
			ldy isrbackup+1		; ISR location			(HI byte)
			sta isr
			sty isr+1
			
			lda charbackup		; restore char set to previous
			sta setchar	
			
			cli		beq one
			cmp #"2"			; "2" key pressed
			beq two
			cmp #"3"			; "3" key pressed
			beq three
			cmp #"4"			; "4" key pressed
			beq four			
			cmp #"5"			; "5" key pressed
			beq five
			cmp #"6"			; "6" key pressed
			beq six
			cmp #"7"#pb0			; switch the port on/off							
			jmp switchport
			
one			lda #pb1			; switch the port on/off							
			jmp switchport
			
two			lda #pb2			; switch the port on/off			
			jmp switchport
			
three		lda #pb3			; switch the port on/off			itch the port on/off			
			jmp switchport
			
allon		lda #pball			; load all on
						
			sta portloc			; store it in port loc	; update port status
			
			lda #on				; set flag to indicate a change
			sta flag			; store it
			
			jmp loop			; j	eor portloc
			sta portloc
			
			lda #on				; set flag to indicate a change
			sta flag
			
			jmp loop			; jump back to loop
			
	
		;
		;	SCAN PORTS FOR 'ON' STATUS
		;	
			
startscan	lda flag			; look for flag, no need to change if nothy on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #0				; set loc to port 0	
				
			jsr rvsont			; set rvs indicator to 'on'
						
+			lda #pb1			; load port 1	; check to see if it's already on
			bit portloc
			beq +				; it is,rt 2
				
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb3			; load port 3	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #9				; set loc to port 3		
			
			jsr rvsont			; set rvs indicat	heck to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
				
			ldy #15				; set loc to port 5
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb6			; load port 6	; check to see if it's already on
			bit portlo;
	;	MOVE BLOCK MEMORY
	;


movedown	ldy #0
			ldx sizeh
			beq md2
md1  		lda (zp1),y 		; move a page at a time
			sta (zp2),y
			iny
			
			bne md1
			inc zp1+1			; 255 byte reached, increment hi byte
			inc zp2+1
			dex
			bne md1				;
 2061    LfF%[ F) GM699!8<YZS^;
M({V OA-%\.ug/(yC9W[/V
?`~Y4Z Dx\]J[
X` 0&1'2(3)4*56,u+].-7#<#< #r(`0_~3fdex0f|81B~< VgRm"Kh9nE`8f `?'1gX=p"ik:Dt;81 PXJ5Y
? M	q3'(f=*+	L5&939*o(\@I" 2'u[521MGn5/$`,U>0.C8<h,"<mfDxF(m@",h 8^(XLBg$; Z`$@ef& $5eb BAEbDDX)J3*&ygyh  44 LC  -F#H     '('fjh*&` J           ??????  ??  ??????    4*5+6,7-+.-7Lg	Lg	Lg	Lg	Lg	 Lg	@Lg	Lg	U
L U
LMU
LU
 L1 U
,  G
, G
, G
,	 G
, G
 , G
@, G
, G
,  N
, N
, N
]]1]]2]]3]]4]]5]]6]]7]                JCKJCKJCKJCKJCKJCKJCKJCK                                                                                                                                     '-'    '+'                                        01234567  		                                                                                            	 		                                                	 	  	  	               ckc   f<<f   ff<   ~`~  f <f~f  }x f <ff<      Z            fff     fffff >`<| bf0fF <f<8gf?      000 00  l88l   ~       0   ~           0`  <nfv<   x~   <fp~   <ff<   ff~   ~`||   >`|f<   <~ff~< ff< >> 0000  >v66 ?         |8l<8    U   00      `0  <~
!A                  3   0``0 ~~         <f 0xx0    8|||8   <~333  @<L#g	@>M )rFhUQT>T}}uCuGPGERK$ 9#H	$rC6H@,, N
L1` 8_e (UCI@0J1I$23I485N6)7]JCK  -`+'IFxCM'j0-7pi&R'Dh'?gf??R^X&3i8l~renfvDxp~?=1^>`|G~Y>S| 	6~*pfcN8V=Q@x 0V8p0Rm/`c.P3
6`2,2"]z,4~NfU< 3j> _/#06>vb6?s{dpQLy
!A#(043up({Y"Qb/H#f) fR`LBcd3#v-C%!01ot>?m60?1(6x0rH<2NU3j_4Q,a?E7')q bQT|.l<8 w+V3  ygyH  yI4  yheyehL0  xVinput. (if not keyboard, must call open and chkin beforehands.)
								;input: 
								;output: a = byte read.
								;used regis Lx  D[
F  V
W
  ! 8 Y
Z
^
  V
W
 \
]
u	 X` W
V
` Y
Z
  Dx\
]
[
X` 0&1'2(3),	 N
, N
 , N
@, N
, N
L1`1`                                                                                                                               UCIUCIUCIUCIUCIUCIUCIUCI                ]0                        0-7   0-7                                                         ''   	                                                         		                                                                                         
              <f~f   <f~ff   |f|f|   >```>   |fff|   ~`x`~   ~`x``   >`ff>   ff~ff   <<   f<   flxlf   ````~   ckcc   c{ogc   <fff<   |f|``   <ffn<  |f|ff   >`<|   ~   ffff<   fff<   c ~0   <f<f<   <f>|            00`0   ~ ~   pp <f        >>                         00000000   8   8   `00` <~~~~<       6> ````````   ~<<~	~<       `       :]012345?67]q  gz9	GQ]LT =fM	cb$P	 
Y xFu:>s&x:S>OC~s	xl/k{og\8unqf=*k+c	L`5~&9}x9*:/\b	7FDTv<bNfF8A     2A                                                                                       INTERFACE64C            INTERFACE64                                                                                                                                                                                                          KKKKKKKKKKKKKKKKK
 2061    LmCARMON.XYZ X_x;6voGUW!28<IJ'[NvQ*%SFv: tKy%=}NNLqe#hvgTG[.RF`IRJWU DxLMKX` ]0u&1]'2u(3])4u*5]N6,]NKg@+01234567: '0 2U:	m
I"-M;#.WeT		/ +V
v t(cN>5x>_(xlK@g3k1b{5og(d(nsRhIpxE7o
0JkcdM`X]~bc}xNJyW M.dmKA3B`0~Af#(x0X4|	8~<iy$Dv9W"`3` Ba3iZ2p~kO	~(f,FnjM	83f`=5 3iO
.m	$ M6dj)ec6@jK
(X"U}20]R2{n*8wh,"<YDF&[(x@",h 8*`*`*a`YB$ Z'=H	YDXK"X_)J3*&ygyh  44 LC -F#H !  !'('mjh*&`KKK+.-7 @W@>M rF$hECwTnQwT7uFYX+,T7rId $rC9!	HrF!@VX, >L#1` p7G4;-GUCI0\1'2	3p45'6	7]GJCKp-zI+'.EbO26Y/-7`K6bNfF8gf??R^X&3iN^Q>;:nvdxJF!p&>1=>`|~c0h>|> @jLI~LlRpsfOw&FZ)ux(	p C0a+/-`:yG |<>xp
6`jfEI$J~lfTf> (F0P>v16y?9T
c
!A?K_,~	:~0PwwOr?Xh(a7,$b&GA^
p@J{h	#7NmF?#1N^fEI$<MavmK`% ?QC<C%'f,U	R(|l</8K  J+V3  ygyH  yI4  yheyehL 0  3
4096']6JvHR<{ KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK