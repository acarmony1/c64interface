KKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK
0,$90,$9E,$00,$C6,$C6,$C6,$FE,$C6,$C6,$C6,$C6,$00,$FF,$FF,$18,$18,$FF,$FF,$00
			!by	$00,$00,$60,$F0,$F9,$FF,$FF,$FF,$FF,$00,$00,$00,$00,$00,$00,$00,$FF,$81,$81,$81,$81,$81,$81,$FF,$FF,$C3,$C3,$C3,$C3,$C3,$C3,$FF
			!by	$E7,$FF,$C3,$99,$81,$99,$FF,$FF,0,$9C,$FF,$FF
			!by	$FF,$99,$C3,$E7,$C3,$99,$FF,$FF,$FF,$99,$99,$C3,$E7,$E7,$FF,$FF,$FF,$81,$F9,$E7,$9F,$81,$FF,$FF,$99,$FF,$C3,$99,$81,$99,$FF,$FF
			!by	$F8,$FC,$82,$33,$33,$33,$87,$FF,$99,$FF,$C3,$99,$99,$C3,$FF,$FF,$FF,$E7,$C3,$81,$E7,$E7,$E7,$E7,7,$98,$99,$C0,$FF,$F9,$F3,$E7,$FF,$FF,$FF,$FF,$FF
			!by	$F3,$E7,$CF,$CF,$CF,$E7,$F3,$FF,$CF,$E7,$F3,$F3,$F3,$E7,$CF,$FF,$FF,$93,$C7,$01,$C7,$93,$FF,$FF,$FF,$E7,$E7,$81,$E7,$E7,$FF,$FF
			!by	$FF,$FF,$FF,$FF,$FF,$E7,$E7,$CF,$FF,$FF,$FF,$81,$FF,$FF,$FF,F,$83,$F1,$83,$FF,$FF,$FF,$C1,$9F,$83,$99,$C3,$FF,$FF,$FF,$81,$F9,$F3,$E7,$CF,$FF,$FF
			!by	$FF,$C3,$99,$C3,$99,$C3,$FF,$FF,$FF,$C3,$99,$C1,$F9,$83,$FF,$FF,$FF,$FF,$E7,$FF,$FF,$E7,$FF,$FF,$FF,$FF,$E7,$FF,$FF,$E7,$E7,$CF
			!by	$F1,$E7,$CF,$9F,$CF,$E7,F,$00,$00,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$FF,$CF,$CF,$CF,$CF,$CF,$CF,$CF,$CF
			!by	$F3,$F3,$F3,$F3,$F3,$F3,$F3,$F3,$FF,$FF,$FF,$1F,$0F,$C7,$E7,$E7,$E7,$E7,$E3,$F0,$F8,$FF,$FF,$FF,$E7,$E7,$C7,$0F,$1F,$FF,$FF,0,$80,$C1,$E3,$F7,$FF
			!by	$9F,$9F,$9F,$9F,$9F,$9F,$9F,$9F,$FF,$FF,$FF,$F8,$F0,$E3,$E7,$E7,$3C,$18,$81,$C3,$C3,$81,$18,$3C,$FF,$C3,$81,$99,$99,$81,$C3,$FF
			!by	$E7,$E7,$99,$99,$E7,$E7,$C3,$FF,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F9,$F7,$E3,$C1,$80,$C1,$E3,0,$00,$C0,$F0,$F8,$F8,$FC,$0F,$0F,$0C,$08,$08,$0C,$07,$07
			!by	$FF,$FF,$7C,$38,$6C,$EE,$C7,$D7,$FC,$FC,$3C,$1C,$18,$38,$F8,$F0,$00,$03,$03,$01,$01,$00,$00,$00,$FF,$7F,$AA,$55,$FF,$7F,$00,$00
			!by	$00,$30,$B0,$30,$E0,$00,$00,$00,$00,$10,$10,$10,$FE,0,$00,$00,$00,$5A,$BD,$BD,$99,$00,$00,$00,$5A,$BD,$BD,$99,$42,$00,$00,$5A,$BD,$BD,$99,$42,$24
			!by	$00,$5A,$BD,$BD,$99,$42,$24,$24,$5A,$BD,$BD,$99,$42,$24,$24,$18,$00,$5A,$BD,$BD,$99,$42,$24,$18,$00,$00,$5A,$BD,$BD,$BD,$24,$18
			!by	$00,$00,$00,$5A,KK$FF,$C3,$99,$81,$99,$99,$FF,$FF,$FF,$83,$99,$83,$99,$83,$FF,$FF,$FF,$C1,$9F,$9F,$9F,$C1,$FF,$FF
			!by	$FF,$83,$99,$99,$99,$83,$FF,$FF,$FF,$81,$9F,$87,$9F,$81,$FF,$FF,$FF,$81,$9F,$87,$9F,$9F,$FF,$FF,$FF,$C1,$9F,$99,$99,$C1,$FF,$FF
			!by	$FF,$99,$99,$8!by	$FF,$83,$99,$83,$9F,$9F,$FF,$FF,$FF,$C3,$99,$99,$91,$C3,$F9,$FF,$FF,$83,$99,$83,$99,$99,$FF,$FF,$FF,$C1,$9F,$C3,$F9,$83,$FF,$FF
			!by	$FF,$81,$E7,$E7,$E7,$E7,$FF,$FF,$FF,$99,$99,$99,$99,$C3,$FF,$FF,$FF,$99,$99,$99,$C3,$E7,$FF,$FF,$FF,$9C,$9C,$94,$8$FF,$EF,$CF,$80,$80,$CF,$EF,$FF
			!by	$FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF,$E7,$E7,$E7,$E7,$FF,$FF,$E7,$FF,$99,$99,$99,$FF,$FF,$FF,$FF,$FF,$99,$99,$00,$99,$00,$99,$99,$FF
			!by	$E7,$C1,$9F,$C3,$F9,$83,$E7,$FF,$9D,$99,$F3,$E7,$CF,$99,$B9,$FF,$C3,$99,$C3,$C$FF,$FF,$FF,$FF,$FF,$FF,$E7,$E7,$FF,$FF,$FC,$F9,$F3,$E7,$CF,$9F,$FF
			!by	$FF,$C3,$91,$99,$89,$C3,$FF,$FF,$FF,$E7,$87,$E7,$E7,$81,$FF,$FF,$FF,$C3,$99,$E3,$8F,$81,$FF,$FF,$FF,$C3,$99,$F3,$99,$C3,$FF,$FF
			!by	$FF,$99,$99,$81,$F9,$F9,$FF,$FF,$FF,$81,$9$F1,$FF,$FF,$FF,$81,$FF,$81,$FF,$FF,$FF,$8F,$E7,$F3,$F9,$F3,$E7,$8F,$FF,$C3,$99,$F9,$F3,$E7,$FF,$E7,$FF
			!by	$FF,$FF,$FF,$00,$00,$FF,$FF,$FF,$F7,$E3,$C1,$80,$80,$E3,$C1,$FF,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$FF,$FF,$FF,$00,$00,$FF,$FF,$FF
			!by	$FF,$F$FF
			!by	$3F,$3F,$3F,$3F,$3F,$3F,$00,$00,$7F,$3F,$9F,$CF,$E7,$F3,$F9,$FC,$FE,$FC,$F9,$F3,$E7,$CF,$9F,$3F,$00,$00,$3F,$3F,$3F,$3F,$3F,$3F
			!by	$00,$00,$FC,$FC,$FC,$FC,$FC,$FC,$FF,$C3,$81,$81,$81,$81,$C3,$FF,$FF,$FF,$FF,$FF,$FF,$00,$00,$FF,$C9,$80,$8$F7,$FF,$E7,$E7,$E7,$00,$00,$E7,$E7,$E7
			!by	$3F,$3F,$CF,$CF,$3F,$3F,$CF,$CF,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$E7,$FF,$FF,$FC,$C1,$89,$C9,$C9,$FF,$00,$80,$C0,$E0,$F0,$F8,$FC,$FE
			!by	$00,$00,$00,$00,$03,$07,$07,$0F,$00,$00,$1E,$FF,$FF,$FF,$FF,$FF,$00,$0$10,$10,$10,$00,$08,$08,$D0,$38,$16,$20,$20,$00,$04,$88,$68,$10,$2C,$22,$40
			!by	$00,$04,$C4,$28,$10,$28,$46,$40,$00,$82,$44,$28,$10,$28,$44,$82,$00,$40,$46,$28,$10,$28,$C4,$04,$00,$40,$22,$2C,$10,$68,$88,$04
			!by	$00,$20,$20,$16,$38,$D0,$08,$08,$0 $BD,$BD,$BD,$18
K1,$99,$99,$FF,$FF,$FF,$C3,$E7,$E7,$E7,$C3,$FF,$FF,$FF,$F9,$F9,$F9,$99,$C3,$FF,$FF,$FF,$99,$93,$87,$93,$99,$FF,$FF
			!by	$FF,$9F,$9F,$9F,$9F,$81,$FF,$FF,$FF,$9C,$80,$94,$9C,$9C,$FF,$FF,$FF,$9C,$84,$90,$98,$9C,$FF,$FF,$FF,$C3,$99,$99,$99,$C3,$FF,$FF
			
0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$20,$20,$02,$19,$20,$20,$0A,$0F,$08,$0E,$20,$03,$01,$12,$0D,$0F,$0E,$19,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20


	;
	;	CUSTOM CHARACTER SET
	;
	
charset		!by	$18,$00,$3C,$66,$7E,$66,$00,$00,$00,$3C,$66,$7E,$66,$66,$00,$00,$0$18,$3C,$00,$00,$00,$06,$06,$06,$66,$3C,$00,$00,$00,$66,$6C,$78,$6C,$66,$00,$00
			!by	$00,$60,$60,$60,$60,$7E,$00,$00,$00,$63,$7F,$6B,$63,$63,$00,$00,$00,$63,$7B,$6F,$67,$63,$00,$00,$00,$3C,$66,$66,$66,$3C,$00,$00
			!by	$00,$7C,$66,$7C,$60,$60,$00,$0$18,$3C,$66,$00,$00,$00,$66,$66,$3C,$18,$18,$00,$00,$00,$7E,$06,$18,$60,$7E,$00,$00,$66,$00,$3C,$66,$7E,$66,$00,$00
			!by	$07,$03,$7D,$CC,$CC,$CC,$78,$00,$66,$00,$3C,$66,$66,$3C,$00,$00,$00,$00,$00,$00,$5A,$BD,$BD,$99,$00,$10,$10,$10,$FE,$10,$10,$10
	$00,$00,$00,$00
			!by	$0C,$18,$30,$30,$30,$18,$0C,$00,$30,$18,$0C,$0C,$0C,$18,$30,$00,$00,$6C,$38,$FE,$38,$6C,$00,$00,$00,$18,$18,$7E,$18,$18,$00,$00
			!by	$00,$00,$00,$00,$00,$18,$18,$30,$00,$00,$00,$7E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$0$7C,$66,$3C,$00,$00,$00,$7E,$06,$0C,$18,$30,$00,$00
			!by	$00,$3C,$66,$3C,$66,$3C,$00,$00,$00,$3C,$66,$3E,$06,$7C,$00,$00,$00,$00,$18,$00,$00,$18,$00,$00,$00,$00,$18,$00,$00,$18,$18,$30
			!by	$0E,$18,$30,$60,$30,$18,$0E,$00,$00,$00,$7E,$00,$7E,$00,$0$FF,$00,$00,$00,$00,$00,$00,$00,$00,$00,$FF,$FF,$00,$00,$30,$30,$30,$30,$30,$30,$30,$30
			!by	$0C,$0C,$0C,$0C,$0C,$0C,$0C,$0C,$00,$00,$00,$E0,$F0,$38,$18,$18,$18,$18,$1C,$0F,$07,$00,$00,$00,$18,$18,$38,$F0,$E0,$00,$00,$00
			!by	$C0,$C0,$C0,$C0,$C0,$C$60,$60,$60,$60,$60,$60,$60,$00,$00,$00,$07,$0F,$1C,$18,$18,$C3,$E7,$7E,$3C,$3C,$7E,$E7,$C3,$00,$3C,$7E,$66,$66,$7E,$3C,$00
			!by	$18,$18,$66,$66,$18,$18,$3C,$00,$06,$06,$06,$06,$06,$06,$06,$06,$08,$1C,$3E,$7F,$3E,$1C,$08,$00,$18,$18,$18,$FF,$FF,$18,$1$0C,$08,$08,$0C,$07,$07
			!by	$FF,$FF,$7C,$38,$6C,$EE,$C7,$D7,$FC,$FC,$3C,$1C,$18,$38,$F8,$F0,$00,$03,$03,$01,$01,$00,$00,$00,$FF,$7F,$AA,$55,$FF,$7F,$00,$00
			!by	$00,$30,$B0,$30,$E0,$00,$00,$00,$00,$10,$10,$10,$FE,$10,$10,$10,$18,$0C,$00,$00,$FF,$C $7E,$FF,$7E,$00,$00,$00,$00,$00,$00,$00,$00,$00,$18,$3C,$66
			!by	$00,$30,$78,$78,$30,$00,$00,$00,$00,$38,$7C,$7C,$7C,$38,$00,$00,$00,$18,$3C,$7E,$7E,$3C,$18,$00,$81,$C3,$E7,$FF,$FF,$E7,$C3,$81
			!by	$9E,$90,$90,$FE,$12,$12,$F2,$00,$F2,$12,$12,$FE,$9$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$0E,$0F,$14,$05,$20,$14,$08,$09,$13,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$15,$13,$05,$12,$10,$0F,$12,$14,$20,$10,$0F,$17,$05,$12,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$2$05,$20,$0F,$10,$10,$0F,$13,$09,$14,$05,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$7C,$66,$7C,$66,$7C,$00,$00,$00,$3E,$60,$60,$60,$3E,$00,$00
			!by	$00,$7C,$66,$66,$66,$7C,$00,$00,$00,$7E,$60,$78,$60,$7E,$00,$00,$00,$7E,$60,$78,$60,$60,$00,$00,$00,$3E,$60,$66,$66,$3E,$00,$00
			!by	$00,$66,$66,$7E,$66,$66,$00,$00,$00,$3C,$18,$18,0,$00,$3C,$66,$66,$6E,$3C,$06,$00,$00,$7C,$66,$7C,$66,$66,$00,$00,$00,$3E,$60,$3C,$06,$7C,$00,$00
			!by	$00,$7E,$18,$18,$18,$18,$00,$00,$00,$66,$66,$66,$66,$3C,$00,$00,$00,$66,$66,$66,$3C,$18,$00,$00,$00,$63,$63,$6B,$7F,$63,$00,$00
			!by	$00,$66,$3C,		!by	$00,$00,$00,$00,$00,$00,$00,$00,$18,$18,$18,$18,$00,$00,$18,$00,$66,$66,$66,$00,$00,$00,$00,$00,$66,$66,$FF,$66,$FF,$66,$66,$00
			!by	$18,$3E,$60,$3C,$06,$7C,$18,$00,$62,$66,$0C,$18,$30,$66,$46,$00,$3C,$66,$3C,$38,$67,$66,$3F,$00,$06,$0C,$18,$00,0,$00,$03,$06,$0C,$18,$30,$60,$00
			!by	$00,$3C,$6E,$66,$76,$3C,$00,$00,$00,$18,$78,$18,$18,$7E,$00,$00,$00,$3C,$66,$1C,$70,$7E,$00,$00,$00,$3C,$66,$0C,$66,$3C,$00,$00
			!by	$00,$66,$66,$7E,$06,$06,$00,$00,$00,$7E,$60,$7C,$0E,$7C,$00,$00,$00,$3E,$60,0,$00,$70,$18,$0C,$06,$0C,$18,$70,$00,$3C,$66,$06,$0C,$18,$00,$18,$00
			!by	$00,$00,$00,$FF,$FF,$00,$00,$00,$08,$1C,$3E,$7F,$7F,$1C,$3E,$00,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$00,$FF,$FF,$00,$00,$00
			!by	$00,$00,$FF,$FF,$00,$00,$00,$00,$00,$FF,0,$FF,$FF,$80,$C0,$60,$30,$18,$0C,$06,$03,$01,$03,$06,$0C,$18,$30,$60,$C0,$FF,$FF,$C0,$C0,$C0,$C0,$C0,$C0
			!by	$FF,$FF,$03,$03,$03,$03,$03,$03,$00,$3C,$7E,$7E,$7E,$7E,$3C,$00,$00,$00,$00,$00,$00,$FF,$FF,$00,$36,$7F,$7F,$7F,$3E,$1C,$08,$00
			!by	$60,8,$18
			!by	$C0,$C0,$30,$30,$C0,$C0,$30,$30,$18,$18,$18,$18,$18,$18,$18,$18,$00,$00,$03,$3E,$76,$36,$36,$00,$FF,$7F,$3F,$1F,$0F,$07,$03,$01
			!by	$00,$00,$00,$00,$03,$07,$07,$0F,$00,$00,$1E,$FF,$FF,$FF,$FF,$FF,$00,$00,$00,$C0,$F0,$F8,$F8,$FC,$0F,$0F,	0,$60,$30,$FF,$FF,$00,$00,$18,$3C,$7E,$FF
			!by	$04,$0A,$12,$21,$41,$01,$00,$00,$00,$00,$9F,$00,$E7,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$0C,$33,$C0,$00,$00,$00
			!by	$01,$03,$06,$0C,$18,$30,$60,$C0,$C0,$60,$30,$18,$0C,$06,$03,$01,$00,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$09,$0E,$14,$05,$12,$06,$01,$03,$05,$20,$17,$09,$0C,$0C,$20,$20,$0C,$09,$0B,$05,$0C,$19,$20,$02,
	ldy #21				; set loc to port 7
			
			jsr rvsont			; set rvs indicator to 'on'	
		
			
		;	
		;	SCAN PORTS FOR 'OFF' STATUS
		;

+			lda #pb0			; port 0	; check to see if it's alread off
			bit portloc 
			bne +				; it is, jump ahead
			
				bit portloc
			bne +				; it is, jump ahead
			
			ldy #12				; set loc to port 4
			
			jsr rvsofft			; set rvs off indicator
			
+			lda #pb5			; load port 5	; check to see if it's already off
			bit portloc
			bne +				; set loc port 5	
				jsr rvsofft			; set rvs off indicator
			
+			lda #pb7			; port 7	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #21				; set loc to port 7
			
			jsr rvsofft			; set rvs indicator to 'off'
		
+	 OFF RVS for selected character
			sta (zp1),y			; store it
	
			rts	
			
			
flag		!by 0	
sizel		!by 0
sizeh		!by 0
portsw		!by 0
xstore		!by 0	
ystore		!by 0
charbackup	!by 0
isrbackup	!by 0,0			


	;	
	;	SCREEN DATA
	;
			
screentx$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!b$34,$5D,$5D,$35,$5D,$5D,$36,$5D,$5D,$37,$5D,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$4A,$43,$4B,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$2$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$2$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$0B,$05,$19,$13,$20,$30,$2D,$37,$20,$03,$0F,$0E,$14,$12,$0F,$0C,$20,$10,$0F,$12,$14,$13,$20,$30,$2D,$37,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$2$14,$0F,$20,$11,$15,$09,$14,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$2 $20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$30,$31,$32,$33,$34,$35,$36,$37,$20,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$10,$0F,$12,$14,$20,$0F,$06,$06,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$2		ldy #0
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb1			; load port 1	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #3				; set loc to port 1
			
			jsr rvsofft			; set rvs inoad port 3	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #9				; set loc to port 3
			
			jsr rvsofft			; set rvs indicator to 'off'

+			lda #pb4			; load port 4	; check to see if it's already off
		
			ldy #15				; set loc to port 5
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb6			; load port 6	; check to see if it's already off
			bit portloc
			bne +				; it is, jump head
			
			ldy #18				; set loc to port 6
			
		jmp returnint


rvsont		lda #rvson			; load the RVS ON character
			ora (zp1),y			; turn ON RVS for selected character
			sta (zp1),y			; store it
			
			rts
			
			
rvsofft		lda #rvsoff			; load the RVS OFF character
			and (zp1),y			; turnt	!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$10,$0F,$12,$14,$20,$20,$13,$14,$01,$14,$15,$13,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,y	$20,$20,$20,$20,$20,$20,$20,$20,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$55,$43,$49,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$5D,$30,$5D,$5D,$31,$5D,$5D,$32,$5D,$5D,$33,$5D,$5D,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$27,$2D,$27,$20,$0B,$05,$19,$20,$01,$0C,$0C,$20,$0F,$06,$06,$20,$27,$2b,$27,$20,$0B,$05,$19,$20,$01,$0C,$0C,$20,$0F,$0E,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,0,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$10,$12,$05,$13,$13,$20,$27,$05,$0E,$14,$05,$12,$27,$20,$20,	0,$20,$20,$B0,$B1,$B2,$B3,$B4,$B5,$B6,$B7,$20,$20,$09,$0E,$04,$09,$03,$01,$14,$05,$13,$20,$10,$0F,$12,$14,$20,$20,$0F,$0E,$20,$20,$20,$20,$20,$20
			!by	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,dicator to 'off'
			
+			lda #pb2			; load port 2	; check to see if it's already off
			bit portloc
			bne +				; it is, jump ahead
			
			ldy #6				; set loc to port 2			
			
			jsr rvsofft			; set rvs indicator to 'off'
			
+			lda #pb3			; l
<<  ????          |8l<8    U   00     8   h,"@ ((F@ D((D @F(( @",h   8    Z   ZB  Zload all ports off (0)
			sta portloc			; store it in port	; update port status
			
			ldx xstore			; restore x
			ldy ystore			; restore y
			clc					
			jsr plot			; cursor position
						
			jsr clearscreen		; clear the screen before exit
								; start interupt operations

			rts	
				
loop		jsr getin			; get a character from keyboard
			
			beq loop
			cmp #$0d			; <return> key pressed
			beq exit			
			cmp #"0"			; "0" key pressed
			beq zero
			cmp #"1"			; "1" key pressed
				; "7" key pressed
			beq seven
			cmp #"+"			; "*" key pressed
			beq allon
			cmp #"-"			; "-" key pressed
			beq alloff
			
			bne loop			; everything else, back to loop

		
	;	
	;	MENU COMMANDS (removed JSR's for speed)
	;

zero		lda 
			jmp switchport
			
four		lda #pb4			; switch the port on/off			
			jmp switchport
			
five		lda #pb5			; switch the port on/off			
			jmp switchport
			
six			lda #pb6			; switch the port on/off			
			jmp switchport

seven		lda #pb7			; swump back to loop
			
alloff		lda #pboff			; load all off
			sta portloc			; store it in port loc ; update port status
			
			lda #on				; set flag to indicate a change
			sta flag			; store it
			
			jmp loop			; jump back to loop
		
switchporting changed
			cmp #off		
			bne +				; somehthing changed continue on
	
			jmp returnint		; no flag set go back
			
+			lda #off			; reset flag back to OFF
			sta flag			; store it	
			
			lda #pb0 			; load port 0	; check to see if it's alread jump ahead
			
			ldy #3				; set loc to port 1	
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb2			; load port 2	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #6				; set loc to poor to 'on'

+			lda #pb4			; load port 4	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #12				; set loc to port 4
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb5			; load port 5	; c c
			beq +				; it is, jump ahead
			
			ldy #18				; set loc to port 6
						
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb7			; load port 7	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
		 ,B$ ZB$$ZB$$ ZB$  Z$   Z}h}eL 
2064}xu{&V[#>pbloc			; add "3" for each port		(HI byte)			
			sta zp1
			sty zp1+1
			
			cli					; restore interupt operation
			
			rts
	
	
	 not finished
md2      	ldx sizel
			beq md4
md3      	lda (zp1),y			; move the remaining bytes
			sta (zp2),y
			iny
			dex
			bne md3
md4      	rts
			

		;	
		;	MAIN LOOP (ISR takes care of most functions)
		;
				
exit		lda #pboff			; 
			sei					; stop interupt operations
			
			lda isrbackup		; load back previous	(LO byte)
			ldy isrbackup+1		; ISR location			(HI byte)
			sta isr
			sty isr+1
			
			lda charbackup		; restore char set to previous
			sta setchar	
			
			cli		beq one
			cmp #"2"			; "2" key pressed
			beq two
			cmp #"3"			; "3" key pressed
			beq three
			cmp #"4"			; "4" key pressed
			beq four			
			cmp #"5"			; "5" key pressed
			beq five
			cmp #"6"			; "6" key pressed
			beq six
			cmp #"7"#pb0			; switch the port on/off							
			jmp switchport
			
one			lda #pb1			; switch the port on/off							
			jmp switchport
			
two			lda #pb2			; switch the port on/off			
			jmp switchport
			
three		lda #pb3			; switch the port on/off			itch the port on/off			
			jmp switchport
			
allon		lda #pball			; load all on
						
			sta portloc			; store it in port loc	; update port status
			
			lda #on				; set flag to indicate a change
			sta flag			; store it
			
			jmp loop			; j	eor portloc
			sta portloc
			
			lda #on				; set flag to indicate a change
			sta flag
			
			jmp loop			; jump back to loop
			
	
		;
		;	SCAN PORTS FOR 'ON' STATUS
		;	
			
startscan	lda flag			; look for flag, no need to change if nothy on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #0				; set loc to port 0	
				
			jsr rvsont			; set rvs indicator to 'on'
						
+			lda #pb1			; load port 1	; check to see if it's already on
			bit portloc
			beq +				; it is,rt 2
				
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb3			; load port 3	; check to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
			
			ldy #9				; set loc to port 3		
			
			jsr rvsont			; set rvs indicat	heck to see if it's already on
			bit portloc
			beq +				; it is, jump ahead
				
			ldy #15				; set loc to port 5
			
			jsr rvsont			; set rvs indicator to 'on'
			
+			lda #pb6			; load port 6	; check to see if it's already on
			bit portlo;
	;	MOVE BLOCK MEMORY
	;


movedown	ldy #0
			ldx sizeh
			beq md2
md1  		lda (zp1),y 		; move a page at a time
			sta (zp2),y
			iny
			
			bne md1
			inc zp1+1			; 255 byte reached, increment hi byte
			inc zp2+1
			dex
			bne md1				;
77181   " LM"8VH)	^fI%!8ghlsyud~ #|v*M&[Z|}+eWdi`gchj zxk7i,
X` 0'Z1(k2)3*4+Z5,k6-7.+V/-8`_< @<Ll+Ur0(|8~< X^ AMA`8@ZrBP6
f;fPOwd.zf
rwf#f?G@K6x8I{47FrvB(oa3KSnmN r:oA rCqVD] C^-J:4Q90%?Qch,"lFF@~#DF^(@",h/ 8Z0kBYC$ Z@ \ HY@AED@N#)4y34yghx  J	8j(j 0$4L$ *i
H *h*0p`8 !  !454M"` f *           ??????  ??  ??????    &1'2(3)4*5+6,7-+.-7Lg	Lg	Lg	Lg	Lg	 Lg	@Lg	Lg	U
L U
LMU
LU
 l\
 U
,  G
, G
, G
,	 G
, G
 , G
@, G
, G
,  N
, N             ]0]]1]]2]]3]]4]]5]]6]]7]                JCKJCKJCKJCKJCKJCKJCKJCK                                                                                                                                     '-'    '+'                                        01234567  		                                                                                            	 		                                                	 	  	  	ff<   fff<   cckc   f<<f   ff<   ~`~  f <f~f  }x f <ff<      Z            fff     fffff >`<| bf0fF <f<8gf?      000 00  l88l   ~       0   ~           0`  <nfv<   x~   <fp~   <ff<   ff~   `   ~<<~ <~ff~< ff< >> 0000  >v66 ?         |8l<8    U   00      `0  <~
!A                  3   0``0 ~~         <f 0xx0333  MX{SL `WYO c yg	YH*<@iUjR Yx	g!@,$i, \ljte1.`  , P<UCI?01{23456"7]JCK -!+']9RxF%M90-70\K&'C*t7w01234567# u%nfv?xQcp~}}>`|_~23>|3&a.Bp|~7x zP<0!%884&\|C5b6=`esR\i~3dfPn< aKI>>$0
a>v26R?`fJQv
!A2`@3'bM`0_I~0ff&x}}_233&a&-%2eWzM	O@C0{DI#X)^K?x(Cxx
{0T+[6+d<Xbg!#1?V0;\V|8lG<8V6UH08'7 }Q
  }3$	p  %    }4}heL 
7184xIC'iT"z0 bf0fF <f<8gf?      000 00  l88l   ~       0   ~           0`  <nfv<   x~   <fp~   <ff<   ff~   
 2064       Lx  D[
F  V
W
  ! 8 Y
Z
^
  V
W
 \
]
u	 X` W
V
` Y
Z
  Dx\
]
[
X` 0
, N
,	 N
, N
 , N
@, N
, N
l\
`1`                                                                                                                               UCIUCIUCIUCIUCIUCIUCIUCI                                          0-7   0-7                                                         ''   	                                                         		                                                                                         
              <f~f   <f~ff   |f|f|   >```>   |fff|   ~`x`~   ~`x``   >`ff>   ff~ff   <<   f<   flxlf   ````~   ckcc   c{ogc   <fff<   |f|``   <ffn<  |f|ff   >`<|   ~   ff~`||   >`|f<   ~0   <f<f<   <f>|            00`0   ~ ~   pp <f        >>                         00000000   8   8   `00` <~~~~<       6> ```````	    8|||8   <~~<       `       + h	p7 dN[WNq	.B7	5kM	H+
 +x>^xlk{ogQq>n|%8iL=Tkc#9{;`vK~d}x%)7GH|<Vb*'FR8gf?Uj)P?~iA         2A                                                                                       INTERFACE128C            INTERFACE64             INTERFACE64C            INTERFACE128              INTERFACE128                                                                                                          KKKKKKKKKKKKKKKKK
72061    LNF|G <!86Ke^u
#^VV\ tI.2KurLgpwb2yW5TWV
`YZH Dx-][
uX` w0w&1w'2w(3w)4w*5w6v,Wne+.-7R, @Ag	j+P))Mf<   ff~   ~`||   >`|f<   ~0   <f<f<   <f>|            00`0   ~ ~   pp <f        >>                         00000000   8   8   `00` <~~~~<       6U.q	p$1)+8VnTVWB	
UmC bVc)>@x[>_&U )xl	bkd{ogEn&KT<Qv0A6,kcuFx"9|(;{`~}xdyy  GA"Lw.bb3FX8gf?*seX8l4~$AP0'1(2)3*4+5,6-7.+/-8`LlLlLlLlLl Ll@LlLlcL cLMcL  `c lj c,  U, U, U,	 U, U , U@, U, U, 88B~<idK$B740dA`q }cmb@j,Es0a X
 7>V(a5dq`R`lY DrPvXS+#93*X/)t#B &;\B,~Avt?wGufFFXS(9CIUCIUCIUCI                ]0]]1]]2]]3]]4]]5]]6]]7]                JCKJCKJCKJCKJCKJCKJCKJCK                                                                                                                                     '-'    '+'   h,"GffDCF(@",h 8+C#4B$p Zd#@V4 sf%D5A5O)hyghyx  J	8j(j40$4L i
H *h*0p`8 !  !454N` f *                                     01234567  		                                                                                            	 		                                                	 	  	       <f 0xx0    8|||8   <~~<       `       |   ~   ffff<   fff<   cckc   f<<f   ff<   ~`~  f <f~f  }x f <ff<      Z            fff     fffff >`<| bf0fF <f<8gf?      000 00  l88l   ~       0   ~           0`  <nfv<   x~   <fp~   <fIkL~GUp YI	f'f'q%G baX	X,$@iZ, N_l\
]1` KtUI01,2345,6U7]zJCK (-W+'tB[e`0-79 hmH]2u'J\z01234567xim;Z
 7184       Lx z,
iT" 0de ,
)	,
 ! 8 jghl  de jk X` ed` gh j zxjki,
X` nafnzv	xidap5>`|W~3Y$>| XC6&lbpn/wI XA0C0\Mf]H8gA>0Px6M}`7G3a
%Vaj!~f,[~`> Q10,>vf6?fE+#s
!A836>a
`0~4^fx0b| \, \, \,	 \, \ , \@, \, \lj`1`                                                                                                                               UCIUCIUCIUCIUJ9N|eY0CE"o`5$[` gTL$hA9!.$gS#l-?3`?*0F
oT0<YBnv1Bc?]0T2LI"aPUK.|:l<8-DUL00LF+8                                                     0-7   0-7                                                         ''   	                                                         		                   }Q3  }g$	p  % 4  }h}eL 
2064}xu{&V[88l   ~       0   ~           0`  <nfv<   x~   <fp~   <ff<   ff~   ~`||   >`|f<   ~0   <f<f<   <f>|     	  	                                                         
              <f~f   <f~ff   |f|f|   >```>   |fff|   ~`x`~   ~`x``   >`ff>   ff~ff   <<   f<   flxlf   ````~   ckcc   c{ogc   <fff<   |f|``   <ffn<  |f|ff   >`<> ````````   ~<<~ <~ff~< ff< >> 0000  >v66 ?         |8l<8    U   00      `0  <~
!A                  3   0``0 ~~   
333  K  <<  ????          |8l<8    U   00     8   h,"@ ((F@ D((D @F(( @",h   8    ZKKKKKKK          ??????  ??  ??????  K :   ZB  ZB$ ZB$$ZB$$ ZB$  Z$   ZKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKKK